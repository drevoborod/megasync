# megasync

ОПИСАНИЕ

Утилита предназначена для регулярной синхронизации одной выбранной директории
с хранилищем на mega.co.nz. Передача содержимого директории происходит в виде
зашифрованного архива.

Сведения по установке, настройке и запуску см. в installation.txt


АЛГОРИТМ

Утилита ищет на mega.co.nz указанную директорию, а в ней - файлы архивов,
созданные в определённом формате: 'Prefix_DD_MM_YY_HH_mm_ss_platformid.7z".
Затем ищет аналогичные архивы в текущей
директории на локальном диске. Если архивы и на локальной машине, и на Меге
одинаковые, то утилита не делает ничего. Если где-то есть более новый архив,
то происходит синхронизация - самый новый архив копируется туда, где его нет:
- Если более новый файл на Меге, то он скачивается, распаковывается и его содержимым
заменяется указанная директория, при этом старая её версия переименовывается
в то же самое, но с постфиксом "_old".
- Если более новый файл на локальном диске, то он отправляется на Мегу.
Если ни там, ни там нет архивов, то указанная директория упаковывается
и архив отправляется на Мегу.
Если указан ключ командной строки "p", то указанная директория принудительно
упаковывается и архив отправляется на Мегу.


ПРИМЕЧАНИЯ

На данный момент все создаваемые архивы остаются на Меге и локальном диске, пока
пользователь не удалит их вручную. Сделано специально в целях предосторожности,
так как приложение ещё сырое, могут быть ошибки. В дальнейшем планируется
реализовать такое поведение: при каждой синхронизации будут удаляться все архивы,
кроме трёх последних по времени.

Возможно, если у кого-то будут такие пожелания, в будущем будет опционально реализована
работа в полностью автономном режиме, т.е. без запроса пароля от Меги - он будет храниться
в конфигурационном файле.

!ВНИМАНИЕ!
На данный момент запускать утилиту можно только на довернных устройствах: во-первых,
вводимый пароль от Меги отбражается на экране; во-вторых, пароль от архивов хранится
в открытом виде в конфигурационном файле.
